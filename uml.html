<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
</head>
<body>
  <h2>TodoAppに登場するクラス</h2>
  <div class="mermaid">
  classDiagram
    direction RL
    EventEmitter --> TodoListModel: 継承
    TodoItemModel --> App
    TodoListModel --> App
    html-util --> App
    App --> index

    class EventEmitter{
      #listeners: [type, listener]を管理するプライベートなMap
      addEventListener(type, listener)イベントリスナーを登録
      emit(type)指定したイベントをディスパッチ
      removeEventListener(type, listener)イベントリスナーを解除。使用してなさそう
    }

    class TodoItemModel{
      id: TodoアイテムのIDを保持
      title: Todoアイテムのタイトルを保持
      completed: Todoアイテムの完了状態を保持
      constructor(title, completed)インスタンスを初期化。引数としてタイトルと完了状態を受け取る。
    }

    class TodoListModel{
      #items: TodoItemModelの配列を保持するプライベートな配列
      constructor(items)インスタンスを初期化
      getTotalCount()TodoItemの合計個数を返す
      getTodoItems()表示できるTodoItemの配列を返す
      onChange(listener)TodoListの状態が更新された時に呼び出されるリスナー関数を登録。EventEmitterクラスのaddEventListenerを利用
      emitChanges()状態が変更された時に登録済みのリスナー関数を呼び出す。EventEmitterクラスのemitを利用
      addTodo(todoItem)TodoItemを追加
      updateTodo(id, completed)指定したidのTodoItemのcompletedを更新
      deleteTodo(id)指定したidのTodoItemを削除
    }

    class html-util{
      escapeSpecialChars()特殊文字をエスケープする
      htmlToElement()HTML文字列からHTML要素を作成して返す
      element()HTML文字列からDOM Nodeを作成して返す
      render()コンテナ要素の中身をbodyElementで上書き
    }

    class App{
      #todoListModel: TodoListModelのプライベートなインスタンス
      mount()状態変化時のDOM操作やメソッド呼び出し
    }
  </div>
  <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({startOnLoad:true});
  </script>
</body>
</html>